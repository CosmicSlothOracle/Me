ğŸ§° Ziel: Hochwertige, moderne Pixel-Art aus Video-Frames mit ComfyUI automatisiert erzeugen
ğŸ”¹ Anforderungen:
Keine manuelle GUI-Nutzung â†’ voll CLI & Script-gesteuert

QualitÃ¤t: modern, keine 8x8 BlÃ¶cke, sondern stilisierte hochaufgelÃ¶ste Pixel-Art (~512â€“768 px)

Stabiler Style-Transfer â†’ geeignet fÃ¼r Frame-by-Frame-GIFs, Sprite-Sheets oder Video

Iterierbar â†’ Parameter anpassbar pro Job

Fehlertolerant & reproduzierbar

ğŸ“¦ 1. InstallationsÃ¼bersicht (Lokal oder Container)
ğŸ“ Projektstruktur
bash
Kopieren
Bearbeiten
pixelart-project/
â”œâ”€â”€ ComfyUI/                      # Hauptengine
â”œâ”€â”€ custom_nodes/
â”‚   â””â”€â”€ ComfyUI-PixelArt-Detector/
â”‚   â””â”€â”€ ComfyUI-Saveaswebp/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ checkpoints/
â”‚   â”‚   â”œâ”€â”€ sdxl.safetensors
â”‚   â”‚   â””â”€â”€ pixel-art-xl-lora.safetensors
â”‚   â””â”€â”€ vae/
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ run_pixel.sh
â”œâ”€â”€ input/                        # Input-Frames
â”œâ”€â”€ output/                       # Ergebnis
ğŸ”§ Schritt 1: ComfyUI + Nodes installieren
passe die Projekstrutkur ggf der auf meinem System an.

bash
Kopieren
Bearbeiten
git clone https://github.com/ComfyUI/ComfyUI.git
cd ComfyUI
pip install -r requirements.txt
cd ..

mkdir custom_nodes
cd custom_nodes
git clone https://github.com/dimtoneff/ComfyUI-PixelArt-Detector.git
git clone https://github.com/Kaharos94/ComfyUI-Saveaswebp.git
cd ..
ğŸ“¦ Python-Libs
bash
Kopieren
Bearbeiten
pip install numpy opencv-python pillow[webp] scipy
ğŸ’¾ Modelle besorgen
SDXL Base: https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0
â†’ Speichern unter: models/checkpoints/sdxl.safetensors

PixelArt LoRA: z.â€¯B. https://civitai.com/models/146970 (z.â€¯B. pixelArtStyle_v1.0)
â†’ Speichern unter: models/checkpoints/pixel-art-xl-lora.safetensors

ğŸ§ª 2. Beispielparameter aus bewerteten Workflows
Parameter	Wert	ErklÃ¤rung
AuflÃ¶sung	512x512	Modern, nicht zu low-res
Dithering-StÃ¤rke	0.75	Guter Kompromiss zwischen Klarheit & Pixelcharme
Palette	adaptive	FÃ¼r Echtbilder besser als fixed
LoRA-StÃ¤rke	0.8	Meist optimal fÃ¼r moderne Pixel-Stylization
Seed	festlegen	FÃ¼r Wiederholbarkeit

ğŸ› ï¸ 3. Workflow-Konfiguration (.json)
Du verwendest das mitgelieferte workflow_webp.json (angepasst):

Wichtige Nodes:

Load Image Batch (frames aus input/)

VAE Encode/Decode

SDXL with LoRA Merge

PixelArtDetector

SaveImageBatch (optional: .webp)

Du kannst auch per Skript den JSON patchen (z.â€¯B. jq) um z.â€¯B. LoRA-StÃ¤rke oder Dithering global zu Ã¤ndern.

ğŸ§‘â€ğŸ’» 4. Automatisierter Script-Run
scripts/run_pixel.sh
bash
Kopieren
Bearbeiten
#!/bin/bash

cd "$(dirname "$0")/../ComfyUI"
python main.py \
  --disable-auto-launch \
  --workflow ../custom_nodes/ComfyUI-PixelArt-Detector/workflow_webp.json \
  --input ../input \
  --output ../output \
  --ckpt ../models/checkpoints/sdxl.safetensors \
  --lora ../models/checkpoints/pixel-art-xl-lora.safetensors
â˜ï¸ 5. Kubernetes Deployment-Ansatz (optional)
FÃ¼r Batch-Verarbeitung via Job (1 Job = 1 Videoszene â†’ Pixel-Frames)

yaml
Kopieren
Bearbeiten
apiVersion: batch/v1
kind: Job
metadata:
  name: pixelart-job
spec:
  template:
    spec:
      containers:
        - name: comfy-pixel
          image: deinrepo/comfyui-pixel:latest
          command: ["/scripts/run_pixel.sh"]
          volumeMounts:
            - name: inputvol
              mountPath: /input
            - name: outputvol
              mountPath: /output
      restartPolicy: Never
ğŸ”„ 6. Iterative Feineinstellung
FÃ¼r jede Iteration kannst du via Script kontrollieren:

Ziel	Node/Parameter	Anpassung
AuflÃ¶sung	ResizeImage	384 â†’ 512 px
Detaillierung	Denoise Strength	< 0.4 bei stilisierter Klarheit
Konsistenz	Seed fixieren	gleiche Pose, andere Farben
Kantentreue	Canny/Depth-ControlNet	optional ergÃ¤nzen
Farbkontrolle	Palette-Type & Anzahl	adaptive + 12-16 Farben
Speicherformat	SaveNode â†’ .webp/.png	je nach Zielsystem

âœ… Fehlervermeidung & Tipps
Erste Tests mit 2â€“4 Frames durchfÃ¼hren

Nicht direkt auf .mp4 arbeiten â†’ vorher Frames extrahieren via ffmpeg

GPU nicht Ã¼berfordern: max. 2 parallel laufende Workflows

Output prÃ¼fen auf PixelglÃ¤ttung (â†’ Dithering erhÃ¶hen)

LoRA Ã¼berschreiben nicht vergessen, falls .json default deaktiviert ist

Einbindung von ControlNet (Canny) fÃ¼r noch klarere Kantenkontrolle (per Node nachrÃ¼stbar)

Nutzung von Frame-Synchronisierern, z.â€¯B. Loopback oder FrameMatch fÃ¼r Sprite-Sheets

CI/CD-Trigger: z.â€¯B. Upload neuer Frames startet automatischen Build-Prozess